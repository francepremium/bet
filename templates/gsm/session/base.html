{% extends 'gsm/base.html' %}

{% load i18n %}
{% load gsm_tags %}

{% block body %}
{% comment %}
<h1><a rel="canonical" href="{{ session.oponnent_A.get_absolute_url }}" title="{{ sport }}: {{ session.oponnent_A_name }}">{{ session.oponnent_A_name }}</a> {% trans 'vs' %} <a href="{{ session.oponnent_B.get_absolute_url }}" title="{{ sport }}: {{ session.oponnent_B_name }}" rel="canonical">{{ session.oponnent_B_name }}</a></h1>
{% if session.season %}
<h2><a href="{{ session.season.competition.get_absolute_url }}" title="{{ session.season.competition }}" rel="canonical">{{ session.season.competition }}</a></h2>
{% endif %}
{% endcomment %}

<table class="soccer session header">
    <tr>
        <th>
            <a rel="canonical" href="{{ session.oponnent_A.get_absolute_url }}" title="{{ sport }}: {{ session.oponnent_A_name }}">{{ session.oponnent_A_name }}</a>
        </th>
        <th colspan="2">
            {% if session.status == 'Fixture' %}
                {% if session.time_unknown %}
                    {{ session.datetime_utc.date }}
                {% else %}
                    {{ session.datetime_utc|display_time }}
                {% endif %}
            {% else %}
                {% if sport.slug == 'tennis' %}
                <table>
                    <tr>
                        <td>{% if session.A1_score|is_int %}{{ session.A1_score }}{% endif %}</td>
                        <td>{% if session.A2_score|is_int %}{{ session.A2_score }}{% endif %}</td>
                        <td>{% if session.A3_score|is_int %}{{ session.A3_score }}{% endif %}</td>
                        <td>{% if session.A4_score|is_int %}{{ session.A4_score }}{% endif %}</td>
                        <td>{% if session.A5_score|is_int %}{{ session.A5_score }}{% endif %}</td>
                    </tr>
                    <tr>
                        <td>{% if session.B1_score|is_int %}{{ session.B1_score }}{% endif %}</td>
                        <td>{% if session.B2_score|is_int %}{{ session.B2_score }}{% endif %}</td>
                        <td>{% if session.B3_score|is_int %}{{ session.B3_score }}{% endif %}</td>
                        <td>{% if session.B4_score|is_int %}{{ session.B4_score }}{% endif %}</td>
                        <td>{% if session.B5_score|is_int %}{{ session.B5_score }}{% endif %}</td>
                    </tr>
                </table>

                {% else %}
                {{ session.A_score|add:session.A_ets }}
                -
                {{ session.B_score|add:session.B_ets }}
                {% endif %}
            {% endif %}
        </th>
        <th>
            <a href="{{ session.oponnent_B.get_absolute_url }}" title="{{ sport }}: {{ session.oponnent_B_name }}" rel="canonical">{{ session.oponnent_B_name }}</a>
        </th>
    </tr>
    <tr>
        <td>
            {% for data in session.oponnent_A|five_sessions_series %}
                <a href="{{ data.entity.get_absolute_url }}" title="{{ data.entity.oponnent_A_name }} vs {{ data.entity.oponnent_A_name }}">
                    {{ data.symbol }}
                </a>
            {% endfor %}
        </td>
        <td colspan="2">
        </td>
        <td>
            {% for data in session.oponnent_B|five_sessions_series %}
                <a href="{{ data.entity.get_absolute_url }}" title="{{ data.entity.oponnent_A_name }} vs {{ data.entity.oponnent_B_name }}">
                    {{ data.symbol }}
                </a>
            {% endfor %}
        </td>
    </tr>
    <tr>
        <td rowspan="5">
            <img src="{{ session.oponnent_A.get_large_image_url }}" />
        </td>
        <td colspan="2"></td>
        <td rowspan="5">
            <img src="{{ session.oponnent_B.get_large_image_url }}" />
        </td>
    </tr>
    <tr>
        <td>{% trans 'competition' %}</td>
        <td><a href="{{ session.season.competition.get_absolute_url }}" title="{{ session.season.competition }}" rel="canonical">{{ session.season.competition }}</a></td>
    </tr>
    <tr>
        {% if session.datetime_utc.date %}
            <td>{% trans 'date' %}</td>
            <td>{{ session.datetime_utc.date }}</td>
        {% else %}
            <td colspan="2"></td>
        {% endif %}
    </tr>
    <tr>
        {% if session.gameweek %}
        <td>{% trans 'gameweek' %}</td>
        <td>{{ session.gameweek }}</td>
        {% else %}
        <td colspan="2"></td>
        {% endif %}
    </tr>
    {% if session.datetime_utc %}
    <tr>
        <td>{% trans 'kickoff' %}</td>
        <td>
            {% if session.time_unknown %}
                {% trans 'yet unknown' %}
            {% else %}
                {{ session.datetime_utc|display_time }}
            {% endif %}
        </td>
    </tr>
    {% else %}
    <tr>
        <td colspan="2"></td>
    </tr>
    {% endif %}
</table>

{% endblock %}

{% block subnav %}
<ul>
    <li class="home tab {% if tab == 'home' %}active{% endif %}">
        <a href="{{ session.get_home_absolute_url }}" title="{{ session.name }}">{% trans 'before' %}</a>
    </li>
    <li class="after tab {% if tab == 'after' %}active{% endif %}">
        <a href="{{ session.get_after_absolute_url }}" title="{{ session.name }}">{% trans 'after' %}</a>
    </li>
    <li class="news tab {% if tab == 'news' %}active{% endif %}">
        <a href="{{ session.get_news_absolute_url }}" title="{{ session.name }}">{% trans 'news' %}</a>
    </li>
    <li class="picks tab {% if tab == 'picks' %}active{% endif %}">
        <a href="{{ session.get_picks_absolute_url }}" title="{{ session.name }}">{% trans 'picks' %}</a>
    </li>
    <li class="live tab {% if tab == 'live' %}active{% endif %}">
        <a href="{{ session.get_live_absolute_url }}" title="{{ session.name }}">{% trans 'live' %}</a>
    </li>
</ul>
{% endblock %}

{% block body_head %}
    {% if session in request.user.session_set.all %}
        <a href="{% url gsm_fan 'unbecome' 'Session' session.pk %}">{% trans 'i do not bet on' %} {{ session }}</a>
    {% else %}
        <a href="{% url gsm_fan 'become' 'Session' session.pk %}">{% trans 'i bet on' %} {{ session }}</a>
    {% endif %}
{% endblock %}
